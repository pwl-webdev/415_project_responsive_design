$.ajaxSetup({cache:!0});var app={};!function(a,e,n){"use strict";e.env={},e.modules={},e.init=function(){e.env=n||e.env,e.coreElements(),e.initModules(),e.initCanvas(),a(window).trigger("tnw-initialLoad")},e.coreElements=function(){e.$body=a("body"),e.$nav=a("nav.nav"),e.$main=a("main.main")},e.initModules=function(){e.cookie.read("tnw_auth_cookie")&&e.loadModule("wp-user-admin"),a(".load-modules").each(function(){a(this).data("modules").split("|").forEach(function(a){e.loadModule(a)})})},e.hasSeenCanvas=function(){return null!==e.cookie.read("tnwc")},e.setCanvasSeen=function(){e.cookie.create("tnwc","1",.625)},e.isCanvasShown=function(){return"undefined"!=typeof e.helpers.queryString.getParam("canvas")?!0:!e.env.ads.disabled&&!e.env.ads.paid&&null===e.env.layout.siteskin&&!e.hasSeenCanvas()},e.initCanvas=function(){var a=e.isCanvasShown();"article"==e.env.template&&a&&(e.env.layout.hasCanvas=!0,e.env.layout.hasBanners=!1)},e.forceAds=function(){e.env.layout.hasCanvas=!1,e.env.layout.hasBanners=!0,e.$body.toggleClass("is-canvas",!1),e.$body.toggleClass("with-ads",!0),a(window).trigger("tnw-loadAds")},e.loadModule=function(n,t,o){t=t||function(){},o=o||this,e.modules[n]?t(o):a.getScript(e.env.paths.assets+"js/modules/"+n+".js").done(function(){t(o)}).fail(function(){console.error("Could not load: "+n)})},e.components={}}($,app,APP_ENV),$(app.init),function(a,e){"use strict";e.ads={slots:[],deferred:[],occupiedSlots:[],adUnitPathBase:"/5117602/",adsRendered:0,adsFailed:0,adsMissed:0,$slotParents:[],sizes:{desktop_top_lb:[728,90],desktop_rt:[[300,600],[300,250],[160,600],[250,250],[180,150],[120,240],[120,600]],desktop_bot_lb:[728,90],mobile_top_lb:[[320,100],[320,50]],mobile_rt:[[320,100],[320,50],[300,250]]},init:function(){var a=e.env.layout.hasCanvas?5e3:500;e.$body.toggleClass("with-ads",e.env.layout.hasBanners),e.helpers.debounce(function(){e.ads.loadAndDisplay()},a,"init-ads"),e.ads.adBlocker()},loadAndDisplay:function(){e.ads.load(),e.ads.render()},load:function(){e.ads.registerSlots(),googletag.cmd.push(function(){for(var a=0;a<e.ads.slots.length;a++)null!==e.ads.slots[a].id&&(e.ads.occupiedSlots[a]=googletag.defineSlot(e.ads.adUnitPathBase+e.ads.slots[a].id,e.ads.slots[a].size,e.ads.slots[a].position).addService(googletag.pubads()));"undefined"!=typeof e.env.category&&""!=e.env.category&&null!=e.env.category&&googletag.pubads().setTargeting("Category",e.env.category),"undefined"!=typeof e.env.template&&""!=e.env.template&&googletag.pubads().setTargeting("Template",e.env.template),"undefined"!=typeof e.env.template&&"article"==e.env.template&&googletag.pubads().setTargeting("Author",e.env.postRack[0].author),""!=e.env.ads.sharethrough&&googletag.pubads().setTargeting("strnativekey",e.env.ads.sharethrough),googletag.pubads().addEventListener("slotRenderEnded",function(a){e.ads.rendered(a)}),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()})},getUnitId:function(a){var n,t=e.env.ads["default"],o=e.env.ads.roadblocked;return n=null!==o?"HIDE"===o[a]?null:o[a]:t[a]},refreshAds:function(){void 0!==googletag&&void 0!==googletag.pubads&&e.ads.occupiedSlots.length>0&&googletag.pubads().refresh(e.ads.occupiedSlots)},registerSlots:function(){if(!(e.ads.slots.length>0)){var n=e.ads.getUnitId("onexone");""!==n&&e.ads.slots.push({id:n,size:[1,1],position:"div-gpt-ad-1416913725-0",parent:"roadblock-1x1"}),e.env.layout.hasBanners&&(-1===["l","xl"].indexOf(a(document).getBreakpoint())?(e.ads.slots.push({id:e.ads.getUnitId("mob_top_lb"),size:e.ads.sizes.mobile_top_lb,position:"div-gpt-ad-1368717423425-2",parent:"ad-unit-top"}),e.ads.slots.push({id:e.ads.getUnitId("mob_bot"),size:e.ads.sizes.mobile_rt,position:"div-gpt-ad-1368717423425-0",parent:"ad-unit-bottom"}),e.ads.slots.push({id:e.ads.getUnitId("med_rt"),size:e.ads.sizes.mobile_rt,position:"div-gpt-ad-1368717423425-1",parent:"ad-unit-right"})):(e.ads.slots.push({id:e.ads.getUnitId("top_lb"),size:e.ads.sizes.desktop_top_lb,position:"div-gpt-ad-1368717423425-2",parent:"ad-unit-top"}),e.ads.slots.push({id:e.ads.getUnitId("med_rt"),size:e.ads.sizes.desktop_rt,position:"div-gpt-ad-1368717423425-1",parent:"ad-unit-right"}),e.ads.slots.push({id:e.ads.getUnitId("bot_lb"),size:e.ads.sizes.desktop_bot_lb,position:"div-gpt-ad-1368717423425-0",parent:"ad-unit-bottom"})),window.SHARETHROUGH&&"article"==e.env.template&&null===e.env.layout.siteskin&&null===e.env.ads.roadblocked&&e.ads.slots.push({id:"Sharethrough_Sidebar",size:[1,1],position:"div-gpt-ad-13687837252244825-0",parent:"ad-unit-sharethrough-sidebar"}))}},render:function(){for(var a=0;a<e.ads.slots.length;a++){var n=e.ads.slots[a],t=e.ads.getSlotParent(n);null===n.id||t.length<=0?(t.addClass("hide"),e.ads.adsMissed++):googletag.cmd.push(function(){googletag.display(n.position)})}e.ads.sendSummary()},rendered:function(n){var t=n.slot.getAdUnitPath();n.isEmpty&&t==e.ads.adUnitPathBase+"TNW_Announcement"&&a("#ad-unit-announcement").parent().remove();for(var o=0;o<e.ads.slots.length;o++)if(e.ads.adUnitPathBase+e.ads.slots[o].id==t){var s=e.ads.getSlotParent(e.ads.slots[o]);n.isEmpty?(s.addClass("hide"),e.ads.adsFailed++):(s.removeClass("hide"),s.addClass("ad-unit-w-"+n.size[0]+" ad-unit-h-"+n.size[1]),e.ads.adsRendered++),e.ads.slots[o].ev=n,e.ads.sendSummary()}},adBlocker:function(){dataLayer.push({event:"adBlocker",page:[{ads:[{blocked:window.noBlocker?"No":"Yes"}]}]})},sendSummary:function(){e.ads.slots.length==e.ads.adsMissed+e.ads.adsRendered+e.ads.adsFailed&&dataLayer.push({page:[{ads:[{full:e.ads.adsRendered,error:e.ads.adsFailed}]}]})},getSlotParent:function(n){if(e.ads.$slotParents[n.position])return e.ads.$slotParents[n.position];var t=a("#"+n.parent);return e.ads.$slotParents[n.position]=t,t}}}($,app),$(window).on("tnw-initialLoad tnw-loadAds",app.ads.init),$(window).on("tnw-refreshAds",app.ads.refreshAds),function(a,e){"use strict";var n=null;e.analytics={canvas:function(t){if(null!==e.canvas.canvasData&&e.canvas.canvasData.commercial){"open"===t&&dataLayer.push({event:"canvas",canvas:e.canvas});var o=[n,t,e.canvas.canvasData._id].join("/");a.ajax({url:o,async:"true",cache:"false",jsonp:"callback",dataType:"jsonp",data:{}})}}};var t=function(a){a.one("tnw-canvasAnalytics.click",function(){e.analytics.canvas("click")}),a.one("tnw-canvasAnalytics.open",function(){e.analytics.canvas("open")}),a.one("tnw-canvasAnalytics.download",function(){e.analytics.canvas("download")})};e.analytics.init=function(){n=-1!=e.env.paths.site.search(".dev.")?e.env.paths.site+"canvas/api/event":"http://canvas.thenextweb.com/api/event",e.helpers.attachOnce(e.canvas.$canvas,"canvas-events",t)}}($,app),$(window).on("tnw-canvasPreLoaded",app.analytics.init),function(a,e){"use strict";function n(a,e){var n=a[0].offsetHeight,t=a[0].offsetWidth,o=n/9,s=t/16;s>o?(e[0].style.height="auto",e[0].style.width=t+"px"):(e[0].style.height=n+"px",e[0].style.width="auto")}var t=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},o=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},s=function(a,e){return"undefined"==typeof a.resources||"undefined"==typeof a.resources[e]||null===a.resources[e]?null:a.assetPath+a.resources[e]},i=function(a,e){var n=s(a,e);return null==n?'""':'url("'+n+'")'},r=function(a){if(!a)return"";var e="";return"image"==a.format?e+="#canvas .tnw-canvas-bg {background-image: "+i(a,"background_mobile")+"}@media screen and ((-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)) {#canvas .tnw-canvas-bg {background-image: "+i(a,"background_mobile")+"background-image: "+i(a,"background_mobile_2x")+" , "+i(a,"background_mobile")+"}}@media screen and (min-aspect-ratio: 9/10) {#canvas .tnw-canvas-bg {background-image: "+i(a,"background")+"}}@media screen and (min-aspect-ratio: 9/10) and ((-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)) {#canvas .tnw-canvas-bg {background-image: "+i(a,"background")+"background-image: "+i(a,"background_2x")+" , "+i(a,"background")+"}}":"video"==a.format&&(e+="#canvas .tnw-canvas-video-bg {background-image:"+i(a,"poster_mobile")+"}@media screen and ((-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)) {#canvas .tnw-canvas-video-bg {background-image:"+i(a,"poster_mobile")+"background-image:"+i(a,"poster_mobile_2x")+", "+i(a,"poster_mobile")+"}}@media screen and (min-aspect-ratio: 9/10) {#canvas .tnw-canvas-video-bg {background-image:"+i(a,"poster")+"}}@media screen and (min-aspect-ratio: 9/10) and ((-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)) {#canvas .tnw-canvas-video-bg {background-image:"+i(a,"poster")+"background-image:"+i(a,"poster_2x")+", "+i(a,"poster")+"}}"),a.cta&&(e+="#canvas .tnw-canvas-cta {background-image:"+i(a,"cta_mobile")+"}@media screen and (min-aspect-ratio: 9/10) {#canvas .tnw-canvas-cta {background-image: "+i(a,"cta")+"}}"),e},c=function(){o()&&a(window).on("resize",function(){(screen.availHeight||screen.height-30)<=window.innerHeight?(e.$body.removeClass("is-canvas"),e.$main.css("animation-duration","0s"),e.$main.css("animation-delay","0s")):e.$body.addClass("is-canvas")})};e.canvas={$sheet:null,$canvas:null,$canvasBg:null,$canvasCTA:null,$canvasInfo:null,$canvasVideo:null,canvasData:null,maxScale:1.1,maxTranslateY:15,sheetBottomY:0,viewportHeight:0,init:function(){e.env.layout.hasCanvas&&(e.$body.toggleClass("is-canvas",!0),e.canvas.$sheet=a("#sheet"),e.canvas.$canvas=a("#canvas"),e.canvas.$canvas.toggleClass("tnw-canvas--iOS",t()),c(),e.canvas.viewportHeight=a(window).height(),e.canvas.fetch())},fetch:function(){var n=a.Deferred(),t=-1!=e.env.paths.site.search(".dev.")?e.env.paths.site+"canvas/api/canvas":"http://canvas.thenextweb.com/api/canvas";a.ajax({type:"GET",url:t,contentType:"application/json",dataType:"JSONP",jsonpCallback:"callback",data:{urlparam:e.helpers.queryString.getParam("canvas"),post_id:e.env.postRack[0].id,article_url:window.location.href,category:e.env.postRack[0].category},success:n.resolve,error:n.reject}),n.promise().then(e.canvas.load).fail(e.canvas.failed)},load:function(n,t,o){"undefined"!=typeof n.error?(e.setCanvasSeen(),e.forceAds()):e.canvas.$canvas.length&&(e.canvas.canvasData=n,a("<div />",{html:"&shy;<style>"+r(n)+"</style>"}).appendTo("body"),e.$body.toggleClass("is-art",e.canvas.isArt(n)),e.canvas.$canvas.html(e.canvas.getCanvasHtml(n)),e.canvas.registerMainElements(),e.canvas.updateCanvasInfo(n),e.canvas.getSheetBottomY(),"video"==n.format?(e.canvas.$canvasVideo=e.canvas.$canvas.find("#canvas-video"),e.canvas.initVideo()):e.canvas.animate(),a(window).trigger("tnw-canvasPreLoaded"),e.canvas.registerMainEvents(),e.helpers.debounce(e.canvas.getSheetBottomY,2e3,"canvas-get-sheet-bottom"),e.helpers.debounce(e.canvas.expand,1200,"canvas-expand"),e.setCanvasSeen())},failed:function(){e.forceAds()},getCanvasHtml:function(n){var t=a("<div>").html(e.canvas.$canvas.find("#tmplCanvas").html());if(n.tracking_code&&t.append(n.tracking_code),"video"==n.format){var o,i,r;o=a("<div>").html(e.canvas.$canvas.find("#tmplCanvasVideo").html()),i=s(n,"poster"),i&&o.find("video").attr("poster",i),r=s(n,"video_webm"),r&&o.find("video").append(a("<source>").attr("type","video/webm").attr("src",r)),r=s(n,"video"),r&&o.find("video").append(a("<source>").attr("type","video/mp4").attr("src",r)),t.find(".tnw-canvas-cta").before(o.find("video"))}return t},registerMainElements:function(){e.canvas.$canvasBg=e.canvas.$canvas.find("#canvas-bg"),e.canvas.$canvasCTA=e.canvas.$canvas.find("#canvas-cta"),e.canvas.$canvasInfo=e.canvas.$canvas.find("#canvas-info")},updateCanvasInfo:function(a){e.canvas.$canvas.addClass("#000000"===a.textcolor?"tnw-canvas--dark":"tnw-canvas--light"),e.canvas.$canvasCTA.attr("href",a.link),"undefined"!=typeof a.subscription_id&&e.canvas.$canvasInfo.addClass("info--brandboost"),e.canvas.$canvasInfo.find(".tnw-canvas-info-artist-brandboost-name").text(a.display_name).attr("href",a.link),d.build(e.canvas.$canvas.find(".tnw-canvas-info-menu"),a)},registerMainEvents:function(){e.canvas.$canvas.find(".tnw-canvas-download-link").on("click",function(){e.canvas.$canvas.trigger("tnw-canvasAnalytics.download")}),e.canvas.$canvasCTA.on("click",function(){e.canvas.$canvas.trigger("tnw-canvasAnalytics.click")}),e.canvas.windowEvents()},initVideo:function(){var a=Waypoint.viewportHeight();n(e.canvas.$canvas,e.canvas.$canvasVideo),e.$main.waypoint(function(a){e.canvas.videoControls("down"===a?"pause":"play")},{offset:.5*a}),e.$main.waypoint(function(a){e.canvas.videoControls("down"===a?"play":"pause")},{offset:function(){return-e.$main.outerHeight()+.33*a}})},expand:function(){var n=t()?"tnw-canvas--iOS--opened":"tnw-canvas--opened";e.$body.toggleClass(n,!0),e.helpers.debounce(e.canvas.getSheetBottomY,1e3,"canvas-get-sheet-bottom"),e.helpers.debounce(Waypoint.refreshAll,1e3,"refresh-waypoints"),e.canvas.$canvas.trigger("tnw-canvasAnalytics.open"),a(window).trigger("tnw-DOMChange"),e.helpers.debounce(function(){e.canvas.videoControls("play")},800,"canvas-video-play")},animate:function(n){var t,o,s;s=a(window).scrollTop(),o=s/e.canvas.viewportHeight,-1===["xs","s"].indexOf(a(window).getBreakpoint())&&(t=32>=s?-1*s:-32,e.canvas.$canvasInfo.css({"-webkit-transform":"translateY("+t+"px)","-moz-transform":"translateY("+t+"px)","-ms-transform":"translateY("+t+"px)",transform:"translateY("+t+"px)"})),o>=0&&1>=o?(e.canvas.$canvas.removeClass("is-scrolledPast"),e.canvas.animateBg(1+o*(e.canvas.maxScale-1)),e.canvas.animateCTA(o*-e.canvas.maxTranslateY)):o>1&&(e.canvas.$canvas.addClass("is-scrolledPast"),s+e.canvas.viewportHeight>=e.canvas.sheetBottomY&&(e.canvas.$canvas.removeClass("is-hidden"),o=(s+e.canvas.viewportHeight-e.canvas.sheetBottomY)/e.canvas.viewportHeight,1>=o&&(o=-1*o+1,e.canvas.animateBg(1+o*(e.canvas.maxScale-1)),e.canvas.animateCTA(o*-e.canvas.maxTranslateY)))),window.requestAnimationFrame(e.canvas.animate)},animateBg:function(a){e.canvas.$canvasBg.length&&e.canvas.$canvasBg.css({"-webkit-transform":"scale("+a+")","-moz-transform":"scale("+a+")","-ms-transform":"scale("+a+")",transform:"scale("+a+")"})},animateCTA:function(a){e.canvas.$canvasCTA.length&&e.canvas.$canvasCTA.css({"-webkit-transform":"translateY("+a+"%)","-moz-transform":"translateY("+a+"%)","-ms-transform":"translateY("+a+"%)",transform:"translateY("+a+"%)"})},videoControls:function(a){e.canvas.$canvasVideo&&e.canvas.$canvasVideo[0][a]()},windowEvents:function(){var n=a(window);n.on("orientationchange resize",function(){e.canvas.viewportHeight=a(window).height()}),n.focus(function(a){e.canvas.videoControls("play")}),n.blur(function(a){e.canvas.videoControls("pause")})},getSheetBottomY:function(){e.canvas.sheetBottomY=e.canvas.$sheet.offset().top+e.canvas.$sheet.outerHeight()},isArt:function(a){return!a.commercial}};var d={build:function(e,n){var t=e.find(".tnw-canvas-info-menu-shareIcons .popitup"),o=e.find(".tnw-canvas-download-link");e.toggleClass("canvas-video-menu","video"==n.format),t.each(function(){a(this).attr("data-url",a(this).attr("data-url-base")+n.urlparam)}),o.attr("href",o.attr("data-href-base")+n._id)}}}($,app),$(window).on("tnw-initialLoad",app.canvas.init),function(a,e){"use strict";e.cookie={create:function(a,e,n){var t;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),t="; expires="+o.toGMTString()}else t="";document.cookie=a+"="+e+t+"; path=/"},read:function(a){for(var e=a+"=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(var o=n[t];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},remove:function(a){e.cookie.create(a,"",-1)}}}($,app);var ecommerceDataLayer=[];!function(a,e){var n=a(".loop"),t=function(){a(".card-quote-arrow--left").on("click",function(){n.trigger("prev.owl.carousel")}),a(".card-quote-arrow--right").on("click",function(){n.trigger("next.owl.carousel")})},o=function(a){window.event?event.keyCode:a.keyCode;"37"==a.keyCode?n.trigger("prev.owl.carousel"):"39"==a.keyCode&&n.trigger("next.owl.carousel")};e.carousel={init:function(){n.length&&(n.owlCarousel({touchDrag:!1,mouseDrag:!1,center:!0,items:2,loop:!0,margin:10,responsive:{0:{items:1},600:{items:1}}}),t(),document.onkeydown=o)}}}($,app),$(window).on("tnw-initialLoad",app.carousel.init),function(a){"use strict";app.hovercard=function(e){var n=this,t=function(){var e,t=function(a,e,n){return Math.floor(Math.sqrt(Math.pow(e-(a.offset().left+a.width()/2),2)+Math.pow(n-(a.offset().top+a.height()/2),2)))},o=0,s=n.getElement();a(document).on("mousemove.popoverCloser",function(i){var r=t(s,i.pageX,i.pageY);r=Math.round(r/5),0===o?o=r:-4>o-r&&!s.is(a(i.target))&&!s.has(a(i.target)).length>0&&(e=setTimeout(function(){n.remove()},100))}),s.on("mouseenter.popoverCloser",function(a){try{clearTimeout(e)}catch(n){}}),s.on("mouseleave.popoverCloser",function(a){e=setTimeout(function(){n.remove()},300)})},o=a("<div></div>").attr("class",e.prefix+"hovercard");return o.html(e.html),n.place=function(){o.css({visibility:"hidden"}),a("body").append(o);var n;o.outerWidth()/2+e.left>a(document).width()?(n=a(document).width()-o.outerWidth()-5,o.attr("data-beak","right")):n=e.left-o.outerWidth()/2,0>n&&(n=5,o.attr("data-beak","left")),o.css({top:e.top-o.outerHeight()-5,left:n,visibility:"visible"}),o.addClass(e.prefix+"hovercard--in"),o.one("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",function(){o.removeClass(e.prefix+"hovercard--in")}),t()},n.remove=function(){o.addClass(e.prefix+"hovercard--out"),o.one("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",function(){o.remove(),n._onClosecallback()})},n.getElement=function(){return o},n._onClosecallback=function(){},n.onClose=function(a){n._onClosecallback=a},n}}($),function(a,e){"use strict";var n=+new Date,t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",o=function(n){var t,o;t=a(this),o=a.ajax({cache:!1,data:t.serialize(),dataType:"json",method:t.attr("method").toUpperCase(),url:t.attr("action")}),a.when(o).then(function(a){var n=t.attr("data-xhr-success");e.forms&&"function"==typeof e.forms[n]&&e.forms[n](t,a)},function(a){var n=t.attr("data-xhr-fail");e.forms&&"function"==typeof e.forms[n]&&e.forms[n](t,a.responseJSON)}),n.preventDefault()},s=function(e){e.attr("src",t),e.waypoint(function(n){var t,o;t=e.attr("data-src"),"undefined"!=typeof t&&a("<img/>").attr("src",t).load(function(){a(this).remove(),"IMG"===e.get(0).tagName?(e.attr("src",t),o=e.attr("data-srcset"),"undefined"!=typeof o&&e.attr("srcset",o)):e.css("background-image",'url("'+t+'")'),e.removeAttr("data-src data-srcset"),e.addClass("lazyLoaded"),Waypoint.refreshAll()}),this.destroy()},{offset:"115%"})},i=function(a){a.on("click",function(n){n.preventDefault(),e.loadModule("popupCenter",function(a){var n=a.data();e.modules.popupCenter(n.url,n.title,n.width,n.height)},a)})},r=function(a){var e;return 60>a?e="second":3600>a?(a/=60,e="minute"):86400>a?(a/=3600,e="hour"):2592e3>a?(a/=86400,e="day"):7862400>a?(a/=604800,e="week"):31536e3>a?(a/=2592e3,e="month"):(a/=31536e3,e="year"),a=Math.floor(a),{diff:a,scale:e}},c=function(a){var n=r(a);return n.diff+" "+e.helpers.pluralizeStr(n.scale,n.diff)+" ago"},d=function(a){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()},l=function(a){var e=new Date(a.attr("datetime")),t=(n-+e)/1e3;a.text(47260800>t?c(t):d(e))};e.core={init:function(){e.core.initHomepage();var n=a("form[data-xhr]");n.length>0&&e.helpers.attachOnce(n,"xhr-form",function(a){a.on("submit",o)}),e.helpers.attachOnce(a(".lazy"),"lazy",s),e.helpers.attachOnce(a("time.timeago"),"timeago",l),e.helpers.attachOnce(a("a.popitup"),"popitup",i),a(".js-modal").modal()},initHomepage:function(){"home"===e.env.template&&a("#coverDate").html(e.helpers.prettyDate())}}}($,app),$(window).on("tnw-initialLoad tnw-DOMChange",app.core.init),function(a,e){"use strict";e.forms={newsletterSuccess:function(a,e){a.addClass("is-subscribed")},newsletterFail:function(a,e){}}}($,app),function(a,e){"use strict";window.debounceTimer=[],e.helpers={attachOnce:function(e,n,t){var o="tnw-attached",s="string"==typeof e?a(e):e;"function"==typeof n?t=n:o+="-"+n,s.each(function(){a(this).data(o)||(a(this).data(o,!0),t(a(this)))})},debounce:function(a,e,n){var t;n=n||"default",t=window.debounceTimer[n],t&&window.clearTimeout(t),window.debounceTimer[n]=window.setTimeout(a,e)},requestAnimationFrame:function(a){return window.requestAnimationFrame?window.requestAnimationFrame(a):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(a):window.setTimeout(a,1e3/60)},pluralizeStr:function(a,e){return 1==+e?a:a+"s"},queryString:{getParams:function(){var a={};return window.location.search.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,t,o){a[n]="undefined"!=typeof o?o:null}),a},getParam:function(a){return e.helpers.queryString.getParams()[a]},update:function(n,t){var o,s=window.location.search,i=e.helpers.queryString.getParams(),r={},c=[],d="";a.each(i,function(a,e){a!=n?r[a]=e:t.length&&(r[a]=t)}),"undefined"==typeof r[n]&&t.length&&(r[n]=t),a.each(r,function(a,e){var n=null!==e?a+"="+encodeURIComponent(e):a;c.push(n)}),d=c.length?"?"+c.join("&"):"",o=s.length?window.location.href.replace(s,d):window.location.href+d,history.replaceState({},"",o)}},prettyDate:function(a){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"];return a=a||new Date,e[a.getDay()]+" &mdash; "+n[a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()},isSafari:function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("safari")&&a.indexOf("chrome")<=-1}}}($,app),function(a,e){"use strict";e.nav={init:function(){var n=a("#modalStayTuned");e.$nav.find(".nav-follow-toggle").on("click touchstart",function(a){e.$body.toggleClass("is-showNavFollow"),a.preventDefault()}),e.$nav.find(".nav-mob-toggle").on("click touchstart",function(a){e.$body.toggleClass("is-showNavMob"),a.preventDefault()}),n.on("modal.show",function(){e.social.loadFb(function(){FB.XFBML.parse(n[0])}),e.social.loadTwitter(function(a){a.widgets.load(n[0])})}),e.$body.waypoint(function(n){-1===["xs","s"].indexOf(a(document).getBreakpoint())&&("down"===n?e.$body.addClass("is-navSticky"):e.$body.removeClass("is-navSticky"))},{offset:-32})}}}($,app),$(window).on("tnw-initialLoad",app.nav.init),function(a,e){"use strict";e.pagination={articleBody:[],prevPageLink:[],nextPageLink:[],nPages:0,pages:[],currentPage:1,articleOffsetTop:0,wrapper:void 0,postBody:void 0,firstLoad:!0,blocking:!0,init:function(){if("article"===e.env.template&&(e.pagination.reset(),e.pagination.wrapper=a("article.post"),e.pagination.postBody=a(".post-body"),!(e.pagination.postBody.length<1))){var n=e.pagination.postBody.html().split("<!--nextpage-->");n.length>1&&e.pagination.paginate(n)}},paginate:function(n){this.pages=n,this.nPages=n.length,"undefined"!=typeof e.env.currentPage&&(this.currentPage=e.env.currentPage),e.pagination.postBody.after("<ul class='u-row post-share'><li class='u-col-xs-6'><a href='#' rel='prev' class='button prev-page' style='width: 100%;'>Previous Page</a></li> <li class='u-col-xs-6'><a href='#' rel='next' class='button next-page' style='width: 100%;'>Next Page</a></li></ul>");var t=window.location.pathname,o=t.split("/");isNaN(o[o.length-2])?e.pagination.updateUI(1):e.pagination.updateUI(parseInt(o[o.length-2])),e.pagination.wrapper.on("click",".next-page, .prev-page",function(n){e.pagination.prevNextPage(a(this),n)})},reset:function(){this.nPages=1,this.pages=[],this.currentPage=1,"object"==typeof e.pagination.wrapper&&null!==e.pagination.wrapper&&e.pagination.wrapper.off("click",".next-page, .prev-page")},prevNextPage:function(a,n){n.preventDefault(),a.hasClass("button--disabled")||(a.hasClass("next-page")?e.pagination.nextPage():e.pagination.prevPage())},nextPage:function(){this.currentPage-1!=this.pages.length&&(e.pagination.wrapper.find(".prev-page").show(),e.pagination.updateUI(this.currentPage+1))},prevPage:function(){this.currentPage-1!=0&&(e.pagination.wrapper.find(".next-page").show(),e.pagination.updateUI(this.currentPage-1))},updateUI:function(n){this.currentPage=n,e.pagination.postBody.html(this.pages[n-1]),1>=n?e.pagination.wrapper.find(".prev-page").addClass("button--disabled"):e.pagination.wrapper.find(".prev-page").removeClass("button--disabled"),n>=this.nPages?e.pagination.wrapper.find(".next-page").addClass("button--disabled"):e.pagination.wrapper.find(".next-page").removeClass("button--disabled"),a(window).trigger("tnw-DOMChange"),a(window).trigger("tnw-refreshAds"),e.pagination.firstLoad?e.pagination.firstLoad=!1:(e.pagination.updateHistory(n),a("html,body").animate({scrollTop:e.pagination.postBody.offset().top-120+"px"},300))},updateHistory:function(a){if(this.blocking)this.blocking=!1;else{var e=window.location.pathname,n=e.split("/");1!==a||isNaN(n[n.length-2])?isNaN(n[n.length-2])?n.splice(n.length-1,0,a):n[n.length-2]=a:(n.splice(n.length-2,1),history.pushState("",document.title,window.location.pathname+window.location.search)),history.pushState(null,null,n.join("/")+window.location.search)}}}}($,app),$(window).on("tnw-initialLoad",app.pagination.init),function(a,e){"use strict";e.page={$pageHeader:a("#page-header"),$pageHeaderVisual:a("#page-header-visual"),maxScale:1.15,pageHeaderBottomY:0,init:function(){a(".page-tabs").tabs(),e.page.$pageHeaderVisual.length&&(e.page.pageHeaderBottomY=e.page.$pageHeader.offset().top+e.page.$pageHeader.height(),a(window).on("orientationchange resize",function(){e.page.pageHeaderBottomY=e.page.$pageHeader.offset().top+e.page.$pageHeader.height()}).trigger("resize"),e.page.animate())},animate:function(n){var t,o,s;s=a(window).scrollTop(),t=s/e.page.pageHeaderBottomY,t>=0&&1>=t&&(o=1+t*(e.page.maxScale-1),e.page.$pageHeaderVisual.css({"-webkit-transform":"scale("+o+")","-moz-transform":"scale("+o+")","-ms-transform":"scale("+o+")",transform:"scale("+o+")"})),window.requestAnimationFrame(e.page.animate)}}}($,app),$(window).on("tnw-initialLoad",app.page.init),function(a,e){"use strict";var n=null,t=null,o=null,s=null,i=function(n){n.length&&a.ajax({url:"http://graph.facebook.com/"+e.env.postRack[0].permalink,dataType:"jsonp",success:function(a){var n,s,i=a&&a.share.comment_count||0;n=+i>=1e3?(+i/1e3).toFixed(0)+"K":i,o.find(".fb-comments-count").text(n),s=0==i?"Start the conversation":"Show "+i+" "+e.helpers.pluralizeStr("comment",i),t.text(s)}})},r=function(a){a.preventDefault(),t.toggleClass("button--disabled button--loading",!0),n.html(n.find("#tmplComments").html()),e.social.loadFb(function(){FB.XFBML.parse(n[0],function(){t.addClass("hidden"),Waypoint.refreshAll()})})},c=function(){var a=e.$main.find(".fb-save");a.length&&e.helpers.debounce(function(){e.social.loadFb(function(){FB.XFBML.parse(a.parent()[0])})},2e3,"fb-sharing")},d=function(a){a.setSelectionRange(0,a.value.length)},l=function(e){e.toggleClass("with-tooltip",!1),e.find(".shortUrl").on("touchend",function(e){d(a(this)[0])})},u=function(a){if(a.length&&window.Clipboard){var n=new Clipboard(a[0]);n.on("success",function(n){a.toggleClass("with-tooltip--success",!0),e.helpers.debounce(function(){a.toggleClass("with-tooltip--success",!1)},1600,"clipboard-success-message")}).on("error",function(n){var t=a.find(".shortUrl")[0],o=e.helpers.isSafari()?"Cmd (⌘) + C to copy":"Ctrl + C to copy";a.attr("data-tooltip-success",o),a.toggleClass("with-tooltip--success",!0),d(t),e.helpers.debounce(function(){a.toggleClass("with-tooltip--success",!1)},3e3,"clipboard-success-message")})}},p=function(e){e.preventDefault(),a("html, body").animate({scrollTop:n.offset().top-200}),r(e)};e.post={init:function(){"article"===e.env.template&&(n=e.$main.find("#comments"),t=e.$main.find("#comments-btn"),o=e.$main.find(".post-actions-comment"),s=e.$main.find(".post-actions-shortUrl"),t.on("click",r),o.on("click",p),e.helpers.attachOnce(e.$main,"comments-count",i),e.helpers.attachOnce(e.$main,"fb-sharing-opts",c),a("html").hasClass("touch")?e.helpers.attachOnce(s,"short-url-select",l):e.helpers.attachOnce(s,"copy-to-clipboard",u),e.$main.find(".post-actions-dropdown-toggle").on("click",function(e){e.stopPropagation();var n=a(this);n.find(".post-actions-dropdown").toggleClass("shown",!0),a(document).one("click",function(){n.find(".post-actions-dropdown").toggleClass("shown",!1)})}),e.$main.find("article.post").fitVids())}}}($,app),$(window).on("tnw-initialLoad",app.post.init),function(a,e){"use strict";var n,t=null,o=null,s="",i=function(a){a.on("click",function(a){a.preventDefault(),c()})},r=function(a){a.on("click",function(a){a.preventDefault(),d()})},c=function(){e.$body.toggleClass("show-search",!0),e.helpers.attachOnce(o,"search-keystroke",l),e.helpers.attachOnce(t.find("#search--close"),"close-search",r),e.helpers.attachOnce(t.find("form"),"search-form",v),""==s&&o.val().length&&p(o.val()),e.helpers.queryString.update("s",s),o.focus(),a(document).on("keyup.search",function(a){a.preventDefault();var e=a.keyCode;27==e&&d()})},d=function(){e.$body.toggleClass("show-search",!1),o.blur(),e.helpers.queryString.update("s",""),a(document).off("keyup.search")},l=function(a){a.on("keyup",function(a){e.helpers.debounce(u,240,"search-keystroke")})},u=function(){var a=o.val();a!=s&&(s=a,p(a))},p=function(o){n&&"pending"===n.state()&&n.abort&&n.abort(),n=a.Deferred(),t.toggleClass("is-searching",!0),a.ajax({type:"GET",url:e.env.paths.base+"ajax/partials/search.php",data:{s:o},dataType:"html",success:n.resolve,error:n.reject}),n.promise().always(function(){t.toggleClass("is-searching",!1)}).then(function(a){t.find("#searchResults").html(a),e.helpers.queryString.update("s",o)})},v=function(a){a.on("submit",function(a){a.preventDefault(),f()})},f=function(){var a=t.find("li.search-result:first-of-type .search-result-title a");a.length&&a[0].click()};e.search={init:function(){t=t||a("#search"),o=o||t.find("input#search-input"),e.helpers.attachOnce(e.$nav.find("#search--open"),"open-search",i),o.val().length&&c()}}}($,app),$(window).on("tnw-initialLoad",app.search.init),function(a,e){"use strict";var n=function(e){"undefined"==typeof FB?a.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"237724236390598",version:"v2.6"}),e()}):e()},t=function(a){"undefined"==typeof window.twttr?(window.twttr=function(a,e,n){var t,o=a.getElementsByTagName(e)[0],s=window.twttr||{};return a.getElementById(n)?s:(t=a.createElement(e),t.id=n,t.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(t,o),s._e=[],s.ready=function(a){s._e.push(a)},s)}(document,"script","twitter-wjs"),twttr.ready(a)):a(twttr)};e.social={loadFb:function(a){a=a||function(){},n(a)},loadTwitter:function(a){a=a||function(){},t(a)}}}($,app),function(a,e){"use strict";var n,t=e.cookie.read("canvas_public_name"),o=(e.cookie.read("brandboost-sharing-on"),e.cookie.read("brandboost-sharing-off")),s="brandboost-switch",i=a("."+s),r=!1,c=function(){if(t&&"article"==APP_ENV.template&&!o){for(var e,n,s=APP_ENV.postRack[0].permalink+"?canvas="+encodeURIComponent(t),i=a("a.post-actions-share"),r=0;r<i.length;r++)e=a(i[r]),n=e.attr("class"),-1!==n.indexOf("twitter")?e.data("url",e.data("url").replace(/\?url=(.*)&/,"?url="+encodeURIComponent(s)+"&")):-1!==n.indexOf("facebook")?e.data("url",e.data("url").replace(/p\[url\]=(.*)&/,"p[url]="+encodeURIComponent(s)+"&")):-1!==n.indexOf("linkedin")||-1!==n.indexOf("reddit")||-1!==n.indexOf("slack")?e.data("url",e.data("url").replace(/url=(.*)/,"url="+encodeURIComponent(s))):-1!==n.indexOf("whatsapp")&&e.attr("href",e.attr("href").replace(/\?text=(.*)/,"?text="+encodeURIComponent(APP_ENV.postRack[0].title+" - "+s)));a(".shortUrl").val(s)}},d=function(){i&&"article"==APP_ENV.template&&(t&&!o&&l(i),i.on("click",function(e){-1!==a(this).attr("class").indexOf(s+"--off")?l(this):u(this),
n&&v()}),a(".touch").on("click","."+s,function(a){t||n||p()}),i.on("mouseover",function(a){t||n||r||p()}))},l=function(n){a(n).removeClass(s+"--off").addClass(s+"--on"),a("."+s+"-state").text("On"),t&&(e.cookie.create("brandboost-sharing-on","1",365),e.cookie.remove("brandboost-sharing-off"),c())},u=function(n){a(n).removeClass(s+"--on").addClass(s+"--off"),a("."+s+"-state").text("Off"),e.cookie.remove("brandboost-sharing-on"),e.cookie.create("brandboost-sharing-off","1",365)},p=function(){n=e.hovercard({prefix:"bb-",html:"<div class='brandboost-hovercard'><div class='bb-card-header'><b><img src='http://cdn0.tnwcdn.com/wp-content/themes/cyberdelia/assets/img/tnw-red.svg'>&nbsp;Brand Boost</b><div class='close'>✕</div></div><div class='bb-card-facts'><div class='u-fontSize-s'>Share your own canvas ad everytime you share a TNW article.</div><div class='u-row bb-card-buttons'><span class='u-col-xs-6'><a href='http://canvas.thenextweb.com/auth/login?via="+e.env.postRack[0].permalink+"' class='button u-w-xs-100 gtm-brandboost-login'>Login</a></span><span class='u-col-xs-6'><a href='https://thenextweb.com/brandboost' target='_blank' class='button button--dark u-w-xs-100 gtm-brandboost-learn'>Learn more</a></span></div></div></div>",top:a(i).offset().top,left:a(i).offset().left+a(i).outerWidth()/2}),n.place(),a(document).on("click",".brandboost-hovercard .close",function(){r=!0,v()})},v=function(){n.getElement().remove(),n=!1};e.components.brandboost={init:function(){d()}}}($,app),$(window).on("tnw-initialLoad",app.components.brandboost.init);var cyberdelia={};!function(a,e){e.knock=function(){a.loadModule("cyberdelia")}}(app,cyberdelia);